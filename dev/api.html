<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · ChainRulesTestUtils</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/chainrules.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="ChainRulesTestUtils logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">ChainRulesTestUtils</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">ChainRulesTestUtils</a></li><li class="is-active"><a class="tocitem" href="api.html">API</a><ul class="internal"><li><a class="tocitem" href="#Global-Configuration"><span>Global Configuration</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="api.html">API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="api.html">API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/master/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Documentation"><a class="docs-heading-anchor" href="#API-Documentation">API Documentation</a><a id="API-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-Documentation" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.:⊢" href="#ChainRulesTestUtils.:⊢"><code>ChainRulesTestUtils.:⊢</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">primal ⊢ tangent</code></pre><p>Infix shorthand method to construct a <code>PrimalAndTangent</code>. Enter via <code>\vdash</code> + tab on supporting editors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/generate_tangent.jl#L23-L28">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.TestIterator" href="#ChainRulesTestUtils.TestIterator"><code>ChainRulesTestUtils.TestIterator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">TestIterator{T,IS&lt;:Base.IteratorSize,IE&lt;:Base.IteratorEltype}</code></pre><p>A configurable iterator for testing purposes.</p><pre><code class="nohighlight">TestIterator(data, itersize, itereltype)
TestIterator(data)</code></pre><p>The iterator wraps another iterator <code>data</code>, such as an array, that must have at least as many features implemented as the test iterator and have a <code>FiniteDifferences.to_vec</code> overload. By default, the iterator it has the same features as <code>data</code>.</p><p>The optional methods <code>eltype</code>, <code>length</code>, and <code>size</code> are automatically defined and forwarded to <code>data</code> if the type arguments indicate that they should be defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/iterator.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.test_approx" href="#ChainRulesTestUtils.test_approx"><code>ChainRulesTestUtils.test_approx</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">test_approx(actual, expected, [msg]; kwargs...)</code></pre><p><code>@test</code>&#39;s  that <code>actual ≈ expected</code>, but breaks up data such that human readable results are shown on failures. Understands things like <code>unthunk</code>ing <code>ChainRuleCore.Thunk</code>s, etc.</p><p>If provided <code>msg</code> is printed on a failure. Often additional items are appended to <code>msg</code> to give bread-crumbs into nested structures.</p><p>All keyword arguments are passed to <code>isapprox</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/check_result.jl#L6-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.test_frule-Tuple" href="#ChainRulesTestUtils.test_frule-Tuple"><code>ChainRulesTestUtils.test_frule</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">test_frule([config::RuleConfig,] f, args..; kwargs...)</code></pre><p><strong>Arguments</strong></p><ul><li><code>config</code>: defaults to <code>ChainRulesTestUtils.ADviaRuleConfig</code>.</li><li><code>f</code>: Function for which the <code>frule</code> should be tested. Can also provide <code>f ⊢ ḟ</code>.</li><li><code>args</code> either the primal args <code>x</code>, or primals and their tangents: <code>x ⊢ ẋ</code><ul><li><code>x</code>: input at which to evaluate <code>f</code> (should generally be set to an arbitary point in the domain).</li><li><code>ẋ</code>: differential w.r.t. <code>x</code>, will be generated automatically if not provided</li></ul>Non-differentiable arguments, such as indices, should have <code>ẋ</code> set as <code>NoTangent()</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output_tangent</code> tangent to test accumulation of derivatives against should be a differential for the output of <code>f</code>. Is set automatically if not provided.</li><li><code>tangent_transforms=TRANSFORMS_TO_ALT_TANGENTS</code>: a vector of functions that  transform the passed argument tangents into alternative tangents that should be tested.  Note that the alternative tangents are only tested for not erroring when passed to  frule. Testing for correctness using finite differencing can be done using a  separate <code>test_frule</code> call, e.g. for testing a <code>ZeroTangent()</code> for correctness:  <code>test_frule(f, x ⊢ ZeroTangent(); tangent_transforms=[])</code>.</li><li><code>fdm::FiniteDifferenceMethod</code>: the finite differencing method to use.</li><li><code>frule_f=frule</code>: Function with an <code>frule</code>-like API that is tested (defaults to <code>frule</code>). Used for testing gradients from AD systems.</li><li>If <code>check_inferred=true</code>, then the inferrability of the <code>frule</code> is checked, as long as <code>f</code> is itself inferrable.</li><li><code>fkwargs</code> are passed to <code>f</code> as keyword arguments.</li><li>All remaining keyword arguments are passed to <code>isapprox</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/testers.jl#L69-L96">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.test_rrule-Tuple" href="#ChainRulesTestUtils.test_rrule-Tuple"><code>ChainRulesTestUtils.test_rrule</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">test_rrule([config::RuleConfig,] f, args...; kwargs...)</code></pre><p><strong>Arguments</strong></p><ul><li><code>config</code>: defaults to <code>ChainRulesTestUtils.ADviaRuleConfig</code>.</li><li><code>f</code>: Function to which rule should be applied. Can also provide <code>f ⊢ f̄</code>.</li><li><code>args</code> either the primal args <code>x</code>, or primals and their tangents: <code>x ⊢ x̄</code><ul><li><code>x</code>: input at which to evaluate <code>f</code> (should generally be set to an arbitary point in the domain).</li><li><code>x̄</code>: currently accumulated cotangent, will be generated automatically if not provided</li></ul>Non-differentiable arguments, such as indices, should have <code>x̄</code> set as <code>NoTangent()</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>output_tangent</code> the seed to propagate backward for testing (technically a cotangent). should be a differential for the output of <code>f</code>. Is set automatically if not provided.</li><li><code>tangent_transforms=TRANSFORMS_TO_ALT_TANGENTS</code>: a vector of functions that transform the passed <code>output_tangent</code> into alternative tangents that should be tested. Note that the alternative tangents are only tested for not erroring when passed to rrule. Testing for correctness using finite differencing can be done using a separate <code>test_rrule</code> call, e.g. for testing a <code>ZeroTangent()</code> for correctness: <code>test_rrule(f, args...; output_tangent=ZeroTangent(), tangent_transforms=[])</code>.</li><li><code>fdm::FiniteDifferenceMethod</code>: the finite differencing method to use.</li><li><code>rrule_f=rrule</code>: Function with an <code>rrule</code>-like API that is tested (defaults to <code>rrule</code>). Used for testing gradients from AD systems.</li><li>If <code>check_inferred=true</code>, then the inferrability of the <code>rrule</code> is checked — if <code>f</code> is itself inferrable — along with the inferrability of the pullback it returns.</li><li><code>fkwargs</code> are passed to <code>f</code> as keyword arguments.</li><li>All remaining keyword arguments are passed to <code>isapprox</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/testers.jl#L174-L201">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.test_scalar-Tuple{Any, Any}" href="#ChainRulesTestUtils.test_scalar-Tuple{Any, Any}"><code>ChainRulesTestUtils.test_scalar</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">test_scalar(f, z; rtol=1e-9, atol=1e-9, fdm=central_fdm(5, 1), fkwargs=NamedTuple(), check_inferred=true, kwargs...)</code></pre><p>Given a function <code>f</code> with scalar input and scalar output, perform finite differencing checks, at input point <code>z</code> to confirm that there are correct <code>frule</code> and <code>rrule</code>s provided.</p><p><strong>Arguments</strong></p><ul><li><code>f</code>: Function for which the <code>frule</code> and <code>rrule</code> should be tested.</li><li><code>z</code>: input at which to evaluate <code>f</code> (should generally be set to an arbitary point in the domain).</li></ul><p><code>fkwargs</code> are passed to <code>f</code> as keyword arguments. If <code>check_inferred=true</code>, then the type-stability of the <code>frule</code> and <code>rrule</code> are checked. All remaining keyword arguments are passed to <code>isapprox</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/testers.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.@maybe_inferred-Tuple" href="#ChainRulesTestUtils.@maybe_inferred-Tuple"><code>ChainRulesTestUtils.@maybe_inferred</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia">@maybe_inferred [Type] f(...)</code></pre><p>Like <code>@inferred</code>, but does not check the return type if tests are run as part of PkgEval or if the environment variable <code>CHAINRULES_TEST_INFERRED</code> is set to <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/testers.jl#L305-L310">source</a></section></article><h2 id="Global-Configuration"><a class="docs-heading-anchor" href="#Global-Configuration">Global Configuration</a><a id="Global-Configuration-1"></a><a class="docs-heading-anchor-permalink" href="#Global-Configuration" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ChainRulesTestUtils.enable_tangent_transform!" href="#ChainRulesTestUtils.enable_tangent_transform!"><code>ChainRulesTestUtils.enable_tangent_transform!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">enable_tangent_transform!(Thunk)</code></pre><p>Adds a alt-tangent tranform to the list of default <code>tangent_transforms</code> for <a href="api.html#ChainRulesTestUtils.test_frule-Tuple"><code>test_frule</code></a> and <a href="api.html#ChainRulesTestUtils.test_rrule-Tuple"><code>test_rrule</code></a> to test. This list of defaults is overwritten by the <code>tangent_transforms</code> keyword argument.</p><div class="admonition is-info"><header class="admonition-header">Transitional Feature</header><div class="admonition-body"><p>ChainRulesCore v1.0 will require that all well-behaved rules work for a variety of tangent representations. In turn, the corresponding release of ChainRulesTestUtils will  test all the different tangent representations by default. At that stage <code>enable_tangent_transform!(Thunk)</code> will have no effect, as it will already  be enabled. We provide this configuration as a transitional feature to help migrate your packages one feature at a time, prior to the breaking release of ChainRulesTestUtils that will enforce it.  </p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiff/ChainRulesTestUtils.jl/blob/814d2bbfc4d6a5ffb74cc0539105a5330e62bee7/src/global_config.jl#L5-L21">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« ChainRulesTestUtils</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Thursday 22 July 2021 14:55">Thursday 22 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
